import{_ as y,a as w,r,o as z,d as p,e as x,f as N,k as g,s as b,v as k,g as t,w as i,m as D,j as d}from"./index-f498da20.js";const I={setup(){const _=w(),e=r([]),m=r(0),a=r(1),v=r(10),u=r(""),o=r(""),n=async()=>{const l=await D.listDrugs({page:a.value,size:v.value,name:u.value,indications:o.value});e.value=l.data.list,m.value=l.data.total},f=l=>{a.value=l,n()},C=()=>{u.value="",o.value="",n()},s=l=>{_.push(`/admin/drug/edit/${l}`)},c=async l=>{confirm("确定要删除该药品吗？")&&(await D.deleteDrug(l),n())},h=l=>{_.push(`/admin/drug/detail/${l}`)};return z(()=>{n()}),{drugs:e,total:m,page:a,pageSize:v,searchName:u,searchIndications:o,fetchList:n,handlePageChange:f,resetSearch:C,editDrug:s,deleteDrug:c,viewDrugDetail:h}}},V={class:"drug-list"},L={class:"search-bar"};function S(_,e,m,a,v,u){const o=p("el-button"),n=p("el-table-column"),f=p("el-table"),C=p("el-pagination");return x(),N("div",V,[e[7]||(e[7]=g("h2",null,"药品列表",-1)),g("div",L,[b(g("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.searchName=s),placeholder:"药品名称关键词"},null,512),[[k,a.searchName]]),b(g("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.searchIndications=s),placeholder:"适应症关键词"},null,512),[[k,a.searchIndications]]),t(o,{size:"small",type:"primary",onClick:a.fetchList},{default:i(()=>e[2]||(e[2]=[d("搜索")])),_:1,__:[2]},8,["onClick"]),t(o,{size:"small",onClick:a.resetSearch},{default:i(()=>e[3]||(e[3]=[d("重置")])),_:1,__:[3]},8,["onClick"])]),t(f,{data:a.drugs,style:{width:"100%"}},{default:i(()=>[t(n,{prop:"id",label:"药品ID"}),t(n,{prop:"drugName",label:"药品名称"}),t(n,{prop:"specification",label:"规格"}),t(n,{prop:"manufacturer",label:"生产厂家"}),t(n,{prop:"indications",label:"适应症"}),t(n,{label:"操作"},{default:i(s=>[t(o,{size:"small",type:"primary",onClick:c=>a.viewDrugDetail(s.row.id)},{default:i(()=>e[4]||(e[4]=[d("查看")])),_:2,__:[4]},1032,["onClick"]),t(o,{size:"small",type:"success",onClick:c=>a.editDrug(s.row.id)},{default:i(()=>e[5]||(e[5]=[d("编辑")])),_:2,__:[5]},1032,["onClick"]),t(o,{size:"small",type:"danger",onClick:c=>a.deleteDrug(s.row.id)},{default:i(()=>e[6]||(e[6]=[d("删除")])),_:2,__:[6]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(C,{background:"",layout:"prev, pager, next, total",total:a.total,"page-size":a.pageSize,"current-page":a.page,onCurrentChange:a.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])}const M=y(I,[["render",S],["__scopeId","data-v-511a219d"]]);export{M as default};
