import{_ as y,a as k,r as c,o as w,d as p,e as P,f as x,k as b,g as a,w as s,p as h,j as d}from"./index-beb53cfa.js";const z={setup(){const m=k(),e=c([]),g=c(0),t=c(1),v=c(10),_=c(""),r=c(""),n=async()=>{const o=await h.listPrescriptions({page:t.value,size:v.value,name:_.value,indications:r.value});e.value=o.data.list,g.value=o.data.total},i=o=>{t.value=o,n()},f=()=>{_.value="",r.value="",n()},C=o=>{m.push(`/admin/prescription/edit/${o}`)},l=o=>{m.push(`/admin/prescription/detail/${o}`)},u=async o=>{confirm("确定要删除该药方吗？")&&(await h.deletePrescription(o),n())};return w(()=>{n()}),{prescriptions:e,total:g,page:t,pageSize:v,searchName:_,searchIndications:r,fetchList:n,handlePageChange:i,resetSearch:f,editPrescription:C,viewPrescription:l,deletePrescription:u}}},V={class:"prescription-list"},N={class:"search-bar"};function I(m,e,g,t,v,_){const r=p("el-input"),n=p("el-button"),i=p("el-table-column"),f=p("el-table"),C=p("el-pagination");return P(),x("div",V,[e[7]||(e[7]=b("h2",null,"药方列表",-1)),b("div",N,[a(r,{modelValue:t.searchName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.searchName=l),placeholder:"药方名称关键词",style:{width:"200px","margin-right":"8px"},clearable:""},null,8,["modelValue"]),a(r,{modelValue:t.searchIndications,"onUpdate:modelValue":e[1]||(e[1]=l=>t.searchIndications=l),placeholder:"适应症关键词",style:{width:"200px","margin-right":"8px"},clearable:""},null,8,["modelValue"]),a(n,{size:"small",type:"primary",onClick:t.fetchList},{default:s(()=>e[2]||(e[2]=[d("搜索")])),_:1,__:[2]},8,["onClick"]),a(n,{size:"small",onClick:t.resetSearch},{default:s(()=>e[3]||(e[3]=[d("重置")])),_:1,__:[3]},8,["onClick"])]),a(f,{data:t.prescriptions,style:{width:"100%"}},{default:s(()=>[a(i,{prop:"id",label:"药方ID"}),a(i,{prop:"prescriptionName",label:"药方名称"}),a(i,{prop:"indications",label:"适应症"}),a(i,{prop:"usage",label:"用法用量"}),a(i,{prop:"treatmentCycle",label:"治疗周期"}),a(i,{label:"操作"},{default:s(l=>[a(n,{size:"small",type:"primary",onClick:u=>t.viewPrescription(l.row.id)},{default:s(()=>e[4]||(e[4]=[d("查看")])),_:2,__:[4]},1032,["onClick"]),a(n,{size:"small",type:"success",onClick:u=>t.editPrescription(l.row.id)},{default:s(()=>e[5]||(e[5]=[d("编辑")])),_:2,__:[5]},1032,["onClick"]),a(n,{size:"small",type:"danger",onClick:u=>t.deletePrescription(l.row.id)},{default:s(()=>e[6]||(e[6]=[d("删除")])),_:2,__:[6]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(C,{background:"",layout:"prev, pager, next, total",total:t.total,"page-size":t.pageSize,"current-page":t.page,onCurrentChange:t.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])}const S=y(z,[["render",I],["__scopeId","data-v-1d8ca41d"]]);export{S as default};
